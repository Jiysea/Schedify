@model EventResourceViewModel

<header class="flex items-center justify-between text-lg font-medium py-3 px-4">
    <h1 class="text-coffee-900">Add to Event Resources</h1>
    <button x-on:click="viewResourceModal = false"
        class="flex items-center justify-center size-8 p-1 rounded-md text-zinc-500 hover:bg-coffee-100 active:bg-coffee-200 hover:text-coffee-700 active:text-coffee-900 duration-200 ease-in-out">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" viewBox="0 0 256 256">
            <path
                d="M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z">
            </path>
        </svg>
    </button>
</header>

<hr class="w-full border-coffee-100">

<main class="flex flex-col gap-10 p-5 relative">

    <form hx-post="/organizer/add-to-event-resource" hx-swap="none" hx-vals='{"ResourceId": "@Model.ResourceId"}'>
        @* Body *@
        <div class="flex flex-col gap-10">

            @* List of Events (Dropdown) *@
            <div x-data="{ open: false }" class="relative flex items-center">
                <button type="button" x-ref="selectedEvent" x-on:click="open = !open" class="input-coffee p-2 text-sm focus:outline-none focus:ring-1 focus:ring-offset-1 focus:ring-coffee-500">
                    @Model.SelectedEvent
                </button>
                <div x-show="open" x-anchor.bottom.offset.10="$refs.selectedEvent" class="z-50 w-60 flex flex-col items-center justify-center bg-white rounded-md border border-coffee-300">
                    @foreach(var evt in Model.DraftEvents)
                    {
                    <button type="button" x-on:click="open = false" class="duration-200 ease-in-out flex items-center justify-start text-start w-full px-1.5 py-3 text-xs font-medium text-coffee-900 hover:bg-coffee-100 active:bg-coffee-300">
                        @evt.Name
                    </button>
                    }
                </div>
            </div>

            @* Total Cost *@
            <div class="flex flex-col w-full">
                <p class="text-xs text-coffee-900">Total Cost</p>
                <div id="updateTotalCost" class="p-2 text-coffee-700">
                    â‚±@Model.TotalCost.ToString("N2")
                </div>
            </div>

            @* Quantity *@
            <div class="flex flex-col col-span-2 gap-1 relative">
                <label for="edit-entryfee" class="text-xs text-coffee-900">Quantity</label>
                <input type="number" inputmode="numeric" class="input-coffee p-2" asp-for="QuantityFromForm"
                    hx-post="/organizer/update-total-cost" hx-swap="innerHTML" hx-trigger="change"
                    hx-target="#updateTotalCost" min="1" max="@Model.QuantityFromResource"
                    placeholder="Type quantity here">
                <div id="validation-QuantityFromForm">
                </div>
            </div>

            @* Footer *@
            <div class="flex items-center justify-center gap-2 w-full">
                <button type="submit"
                    class="duration-200 ease-in-out text-sm py-2 rounded-md w-full font-semibold text-coffee-50 bg-coffee-700 hover:bg-coffee-800 active:bg-coffee-900">
                    SAVE
                </button>
                <button hx-get="/organizer/view-resource/@Model.ResourceId" hx-swap="innerHTML"
                    hx-target="#viewResourceModalContent"
                    class="duration-200 ease-in-out text-sm font-semibold flex items-center justify-center px-3 py-1.5 rounded-md border-2 border-coffee-600 hover:border-transparent hover:bg-coffee-700 active:bg-coffee-900 text-coffee-600 hover:text-coffee-50 active:text-coffee-50">
                    CANCEL
                </button>
            </div>
        </div>
    </form>
</main>
